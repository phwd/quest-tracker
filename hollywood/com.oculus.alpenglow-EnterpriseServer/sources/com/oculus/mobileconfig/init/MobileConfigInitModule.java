package com.oculus.mobileconfig.init;

import X.AbstractC01750Lk;
import X.AbstractC02890az;
import X.AbstractC02980bI;
import X.AnonymousClass0JB;
import X.AnonymousClass0NK;
import X.AnonymousClass0Sj;
import X.AnonymousClass12o;
import X.AnonymousClass12r;
import X.AnonymousClass15y;
import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import com.facebook.inject.ApplicationScoped;
import com.facebook.inject.AutoGeneratedBinder;
import com.facebook.inject.ForAppContext;
import com.facebook.inject.InjectorModule;
import com.facebook.inject.ProviderMethod;
import com.facebook.inject.UnsafeContextInjection;
import com.facebook.mobileconfig.factory.module.SessionlessMC;
import com.facebook.ultralight.AutoGeneratedSwitchIdClass;
import com.oculus.auth.credentials.Credentials;
import java.util.Locale;

@InjectorModule
public abstract class MobileConfigInitModule extends AbstractC01750Lk {
    public static volatile PackageInfo _UL__ULSEP_android_content_pm_PackageInfo_ULSEP_INSTANCE;
    public static final Object _UL__ULSEP_android_content_pm_PackageInfo_ULSEP_LOCK = new Object();
    public static volatile AbstractC02890az _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_INSTANCE;
    public static final Object _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_LOCK = new Object();
    public static volatile AbstractC02890az _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_com_facebook_mobileconfig_factory_module_SessionlessMC_ULSEP_INSTANCE;
    public static final Object _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_com_facebook_mobileconfig_factory_module_SessionlessMC_ULSEP_LOCK = new Object();

    @AutoGeneratedBinder
    public static class AutoGeneratedBindingsForMobileConfigInitModule {
    }

    @AutoGeneratedSwitchIdClass
    public static final class UL_id {
        public static final int _UL__ULSEP_android_content_pm_PackageInfo_ULSEP_BINDING_ID = 84;
        public static final int _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_BINDING_ID = 116;
        public static final int _UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_com_facebook_mobileconfig_factory_module_SessionlessMC_ULSEP_BINDING_ID = 104;
        public static final int _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigConfiguration_ULSEP_BINDING_ID = 1;
        public static final int _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigInitOptions_ULSEP_BINDING_ID = 126;
        public static final int _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigInit_ULSEP_BINDING_ID = 32;
        public static final int _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLoginHandler_ULSEP_BINDING_ID = 92;
        public static final int _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_BINDING_ID = 73;
    }

    @SessionlessMC
    @ApplicationScoped(enableScopeValidation = false)
    @ProviderMethod
    public static AbstractC02890az A01(@SessionlessMC AnonymousClass12r r3, @ForAppContext Context context) {
        AnonymousClass12o r2 = new AnonymousClass12o(r3);
        r2.A04 = context.getFilesDir();
        r2.A00 = context.getAssets();
        boolean z = false;
        if (r2.A01 == null) {
            z = true;
        }
        r2.A05 = z;
        if (r2.A03 == null) {
            r2.A03 = new AnonymousClass15y();
        }
        return r2;
    }

    @ApplicationScoped(enableScopeValidation = false)
    @ProviderMethod
    public static AbstractC02890az A02(AnonymousClass12r r3, @ForAppContext Context context, final AbstractC02980bI<Credentials> r5) {
        AnonymousClass1 r2 = new AnonymousClass0Sj() {
            /* class com.oculus.mobileconfig.init.MobileConfigInitModule.AnonymousClass1 */

            @Override // X.AnonymousClass0Sj
            public final String getUserId() {
                if (AbstractC02980bI.this.get() != null) {
                    return ((Credentials) AbstractC02980bI.this.get()).mUserId;
                }
                return "";
            }
        };
        AnonymousClass12o r1 = new AnonymousClass12o(r3);
        r1.A04 = context.getFilesDir();
        r1.A01 = r2;
        r1.A05 = false;
        if (r1.A03 == null) {
            r1.A03 = new AnonymousClass15y();
        }
        return r1;
    }

    @ApplicationScoped(enableScopeValidation = false)
    @ProviderMethod
    public static PackageInfo A00(@UnsafeContextInjection Context context) {
        PackageManager packageManager = context.getPackageManager();
        if (packageManager != null) {
            String packageName = context.getPackageName();
            try {
                int A00 = AnonymousClass0JB.A00();
                PackageInfo packageInfo = packageManager.getPackageInfo(packageName, 0);
                int i = packageInfo.versionCode;
                if (i != A00) {
                    AnonymousClass0NK.A01("AndroidModule", String.format(Locale.US, "Android PackageManager returned version code: %d, apk version code is: %d", Integer.valueOf(i), Integer.valueOf(A00)));
                }
                return packageInfo;
            } catch (PackageManager.NameNotFoundException e) {
                throw new RuntimeException(e);
            }
        } else {
            throw new RuntimeException("Package Manager not found");
        }
    }
}
