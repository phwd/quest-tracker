package com.oculus.alpenglow.config;

import X.AbstractC008109t;
import X.AbstractC00870As;
import X.AbstractC02990bJ;
import X.AnonymousClass007;
import X.AnonymousClass09l;
import X.AnonymousClass0AU;
import X.AnonymousClass0Al;
import X.AnonymousClass0BN;
import X.AnonymousClass0ED;
import X.AnonymousClass0Fo;
import X.AnonymousClass0GS;
import X.AnonymousClass0Pj;
import X.AnonymousClass0XQ;
import X.AnonymousClass0XT;
import X.AnonymousClass0XU;
import X.C01340Gg;
import android.content.Context;
import com.facebook.graphservice.interfaces.TreeJsonSerializer;
import com.facebook.graphservice.tree.TreeJNI;
import com.facebook.inject.ForAppContext;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.facebook.ultralight.Inject;
import com.oculus.alpenglow.http.IGsonTypeAdapter;
import java.io.IOException;
import java.io.StringReader;
import java.lang.reflect.Type;
import javax.annotation.Nullable;

@Dependencies({"_UL__ULSEP_android_content_Context_ULSEP_com_facebook_inject_ForAppContext_ULSEP_BINDING_ID"})
public class DeviceTypeAdapter implements IGsonTypeAdapter<Device>, AnonymousClass0BN<Device>, AbstractC008109t<Device> {
    public final TreeJsonSerializer mTreeJsonSerializer;

    /* Return type fixed from 'java.lang.Object' to match base method */
    @Override // X.AbstractC008109t
    @Nullable
    public final Device A27(AnonymousClass0AU r12, Type type, AnonymousClass09l r14) throws AnonymousClass0Al {
        try {
            PersistedDeviceImpl persistedDeviceImpl = (PersistedDeviceImpl) this.mTreeJsonSerializer.deserializeFromJson("HWMOculusDevice", PersistedDeviceImpl.TREE_SHAPE_HASH_FOR_TESTS, PersistedDeviceImpl.class, PersistedDeviceImpl.TYPE_TAG, r12.toString());
            if (persistedDeviceImpl != null) {
                return (Device) persistedDeviceImpl.reinterpret(DeviceImpl.class, DeviceImpl.TYPE_TAG);
            }
            return null;
        } catch (IOException | IllegalArgumentException | UnsupportedOperationException unused) {
            return null;
        } catch (Exception e) {
            throw new AnonymousClass0Al(e);
        }
    }

    @Override // com.oculus.alpenglow.http.IGsonTypeAdapter
    public final Class<Device> A4i() {
        return Device.class;
    }

    /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object, java.lang.reflect.Type, X.0As] */
    @Override // X.AnonymousClass0BN
    @Nullable
    public final AnonymousClass0AU A7g(Device device, Type type, AbstractC00870As r9) {
        PersistedDevice A19 = device.A19();
        if (!(A19 instanceof PersistedDeviceImpl)) {
            return null;
        }
        try {
            AnonymousClass0Fo r5 = new AnonymousClass0Fo(new StringReader(((TreeJNI) A19).toExpensiveHumanReadableDebugString()));
            boolean z = r5.A08;
            r5.A08 = true;
            try {
                AnonymousClass0AU A00 = AnonymousClass0ED.A00(r5);
                try {
                    r5.A08 = z;
                    if ((A00 instanceof AnonymousClass0XT) || r5.A0D() == AnonymousClass007.A0J) {
                        return A00;
                    }
                    throw new AnonymousClass0XQ("Did not consume the entire document.");
                } catch (AnonymousClass0GS | NumberFormatException e) {
                    throw new AnonymousClass0XQ(e);
                }
            } catch (StackOverflowError e2) {
                throw new AnonymousClass0Al("Failed parsing JSON source: " + r5 + " to Json", e2);
            } catch (OutOfMemoryError e3) {
                throw new AnonymousClass0Al("Failed parsing JSON source: " + r5 + " to Json", e3);
            } catch (Throwable th) {
                r5.A08 = z;
                throw th;
            }
        } catch (IOException e4) {
            throw new AnonymousClass0XU(e4);
        }
    }

    @Inject
    public DeviceTypeAdapter(@ForAppContext Context context) {
        this.mTreeJsonSerializer = AnonymousClass0Pj.A01(context);
    }

    @AutoGeneratedFactoryMethod
    public static final DeviceTypeAdapter A00(AbstractC02990bJ r1) {
        return new DeviceTypeAdapter(C01340Gg.A00(r1));
    }
}
