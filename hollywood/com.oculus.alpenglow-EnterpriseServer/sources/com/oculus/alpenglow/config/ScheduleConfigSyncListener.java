package com.oculus.alpenglow.config;

import X.AnonymousClass006;
import X.AnonymousClass0NK;
import android.app.job.JobInfo;
import android.app.job.JobScheduler;
import android.content.ComponentName;
import android.content.Context;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.oculus.alpenglow.constants.Constants;
import com.oculus.alpenglow.lifecycle.StartupListener;
import java.util.concurrent.TimeUnit;

@Dependencies({})
public class ScheduleConfigSyncListener implements StartupListener {
    public static final long CONFIG_SYNC_BACKOFF = TimeUnit.MINUTES.toMillis(30);
    public static final long CONFIG_SYNC_INTERVAL;
    public static final long CONFIG_SYNC_WINDOW;
    public static final String TAG = AnonymousClass006.A05(Constants.TAG_PREFIX, "ScheduleConfigSyncListener");

    static {
        TimeUnit timeUnit = TimeUnit.HOURS;
        CONFIG_SYNC_INTERVAL = timeUnit.toMillis(4);
        CONFIG_SYNC_WINDOW = timeUnit.toMillis(1);
    }

    @AutoGeneratedFactoryMethod
    public static final ScheduleConfigSyncListener A00() {
        return new ScheduleConfigSyncListener();
    }

    @Override // com.oculus.alpenglow.lifecycle.StartupListener
    public final void A6b(Context context) {
        JobInfo.Builder builder = new JobInfo.Builder(Constants.CONFIG_SYNC_JOB_ID, ComponentName.createRelative(context.getApplicationContext(), ConfigSyncService.class.getName()));
        builder.setRequiredNetworkType(1).setPeriodic(CONFIG_SYNC_INTERVAL, CONFIG_SYNC_WINDOW).setBackoffCriteria(CONFIG_SYNC_BACKOFF, 0);
        JobScheduler jobScheduler = (JobScheduler) context.getSystemService("jobscheduler");
        if (jobScheduler == null) {
            AnonymousClass0NK.A01(TAG, "Job scheduler service not found");
        } else {
            jobScheduler.schedule(builder.build());
        }
    }
}
