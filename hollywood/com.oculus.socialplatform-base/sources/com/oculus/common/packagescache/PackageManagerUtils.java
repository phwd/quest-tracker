package com.oculus.common.packagescache;

import X.AbstractC03180ld;
import X.AnonymousClass0Qj;
import X.AnonymousClass0RE;
import X.AnonymousClass0VB;
import X.AnonymousClass0VF;
import X.AnonymousClass0lg;
import X.AnonymousClass1TK;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.DeadObjectException;
import com.facebook.inject.ApplicationScoped;
import com.facebook.ultralight.AutoGeneratedAccessMethod;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import javax.annotation.Nullable;
import javax.inject.Inject;
import javax.inject.Provider;

@Dependencies({"_UL__ULSEP_android_content_pm_PackageManager_ULSEP_BINDING_ID"})
@ApplicationScoped
public class PackageManagerUtils {
    public static volatile PackageManagerUtils _UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_INSTANCE;
    public AnonymousClass0RE _UL_mInjectionContext;

    @Nullable
    private PackageInfo findPackageInfo(String str) {
        try {
            return ((PackageManager) AnonymousClass0VF.A03(0, 42, this._UL_mInjectionContext)).getPackageInfo(str, 0);
        } catch (PackageManager.NameNotFoundException unused) {
            return null;
        } catch (RuntimeException e) {
            if (e.getCause() instanceof DeadObjectException) {
                return null;
            }
            throw e;
        }
    }

    /* JADX WARNING: Code restructure failed: missing block: B:12:0x0017, code lost:
        return null;
     */
    /* JADX WARNING: Exception block dominator not found, dom blocks: [] */
    @javax.annotation.Nullable
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public synchronized android.content.pm.ApplicationInfo getApplicationInfo(java.lang.String r4, int r5) {
        /*
            r3 = this;
            monitor-enter(r3)
            r2 = 0
            r1 = 42
            X.0RE r0 = r3._UL_mInjectionContext     // Catch:{ NameNotFoundException -> 0x0015, all -> 0x0012 }
            java.lang.Object r0 = X.AnonymousClass0VF.A03(r2, r1, r0)     // Catch:{ NameNotFoundException -> 0x0015, all -> 0x0012 }
            android.content.pm.PackageManager r0 = (android.content.pm.PackageManager) r0     // Catch:{ NameNotFoundException -> 0x0015, all -> 0x0012 }
            android.content.pm.ApplicationInfo r0 = r0.getApplicationInfo(r4, r5)     // Catch:{ NameNotFoundException -> 0x0015, all -> 0x0012 }
            monitor-exit(r3)
            return r0
        L_0x0012:
            r0 = move-exception
            monitor-exit(r3)
            throw r0
        L_0x0015:
            r0 = 0
            monitor-exit(r3)
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: com.oculus.common.packagescache.PackageManagerUtils.getApplicationInfo(java.lang.String, int):android.content.pm.ApplicationInfo");
    }

    @Nullable
    public synchronized PackageInfo getPackageInfo(String str) {
        return findPackageInfo(str);
    }

    public synchronized boolean isPackageInstalled(String str) {
        boolean z;
        z = false;
        if (findPackageInfo(str) != null) {
            z = true;
        }
        return z;
    }

    /* JADX WARNING: Code restructure failed: missing block: B:5:0x000a, code lost:
        if (r1 < r4) goto L_0x000c;
     */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public synchronized boolean requiresUpgrade(java.lang.String r3, int r4) {
        /*
            r2 = this;
            monitor-enter(r2)
            android.content.pm.PackageInfo r0 = r2.findPackageInfo(r3)     // Catch:{ all -> 0x000f }
            if (r0 == 0) goto L_0x000c
            int r1 = r0.versionCode     // Catch:{ all -> 0x000f }
            r0 = 0
            if (r1 >= r4) goto L_0x000d
        L_0x000c:
            r0 = 1
        L_0x000d:
            monitor-exit(r2)
            return r0
        L_0x000f:
            r0 = move-exception
            monitor-exit(r2)
            throw r0
        */
        throw new UnsupportedOperationException("Method not decompiled: com.oculus.common.packagescache.PackageManagerUtils.requiresUpgrade(java.lang.String, int):boolean");
    }

    @AutoGeneratedAccessMethod
    public static final AbstractC03180ld _UL__ULSEP_com_facebook_inject_Lazy_ULLT_com_oculus_common_packagescache_PackageManagerUtils_ULGT__ULSEP_ACCESS_METHOD(AnonymousClass0lg r2) {
        return new AnonymousClass0VB(2083, r2);
    }

    @AutoGeneratedAccessMethod
    public static final PackageManagerUtils _UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_ACCESS_METHOD(AnonymousClass0lg r2) {
        return (PackageManagerUtils) AnonymousClass1TK.A00(2083, r2, null);
    }

    @AutoGeneratedFactoryMethod
    public static final PackageManagerUtils _UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_FACTORY_METHOD(AnonymousClass0lg r4, Object obj) {
        if (_UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_INSTANCE == null) {
            synchronized (PackageManagerUtils.class) {
                AnonymousClass0Qj A00 = AnonymousClass0Qj.A00(_UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_INSTANCE, r4);
                if (A00 != null) {
                    try {
                        _UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_INSTANCE = new PackageManagerUtils(r4.getApplicationInjector());
                    } finally {
                        A00.A01();
                    }
                }
            }
        }
        return _UL__ULSEP_com_oculus_common_packagescache_PackageManagerUtils_ULSEP_INSTANCE;
    }

    @AutoGeneratedAccessMethod
    public static final Provider _UL__ULSEP_javax_inject_Provider_ULLT_com_oculus_common_packagescache_PackageManagerUtils_ULGT__ULSEP_ACCESS_METHOD(AnonymousClass0lg r2) {
        return new AnonymousClass0VB(2083, r2);
    }

    @Inject
    public PackageManagerUtils(AnonymousClass0lg r3) {
        this._UL_mInjectionContext = new AnonymousClass0RE(1, r3);
    }

    @Nullable
    private PackageInfo getPackage(String str) {
        return findPackageInfo(str);
    }

    public synchronized long getInstalledVersionCode(String str) {
        return getInstalledVersionCode(str, -1);
    }

    public synchronized long getInstalledVersionCode(String str, long j) {
        PackageInfo packageInfo = getPackageInfo(str);
        if (packageInfo != null) {
            j = (long) packageInfo.versionCode;
        }
        return j;
    }
}
