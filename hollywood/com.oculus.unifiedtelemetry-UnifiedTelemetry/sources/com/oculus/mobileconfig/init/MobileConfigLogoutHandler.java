package com.oculus.mobileconfig.init;

import X.AbstractC0234Xa;
import X.AbstractC0246Xt;
import X.AbstractC0247Xu;
import X.C0088Gy;
import X.C0235Xd;
import X.GA;
import X.Gt;
import X.RU;
import X.XX;
import X.eJ;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.oculus.auth.handler.LogoutHandler;
import javax.inject.Inject;

@Dependencies({"_UL__ULSEP_com_facebook_mobileconfig_impl_MobileConfigManagerSingletonHolder_ULSEP_BINDING_ID", "_UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_BINDING_ID", "_UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigInit_ULSEP_BINDING_ID"})
public class MobileConfigLogoutHandler implements LogoutHandler {
    public static final int NUM_USERS_DATA_TO_SAVE = 5;
    public final eJ<AbstractC0234Xa> mMobileConfigFactoryProvider;
    public final AbstractC0246Xt<MobileConfigInit> mMobileConfigInitLazy;
    public final eJ<XX> mMobileConfigManagerHolderProvider;

    @AutoGeneratedFactoryMethod
    public static final MobileConfigLogoutHandler A00(AbstractC0247Xu xu) {
        return new MobileConfigLogoutHandler(new C0088Gy(64, xu), new C0088Gy(115, xu), new Gt(41, xu));
    }

    @Override // com.oculus.auth.handler.LogoutHandler
    public final void beforeLogout() {
        MobileConfigInit mobileConfigInit = this.mMobileConfigInitLazy.get();
        this.mMobileConfigManagerHolderProvider.get().deleteOldUserData(5);
        synchronized (mobileConfigInit) {
            GA ga = (GA) mobileConfigInit.mMobileConfigFactoryProvider.get();
            RU ru = ga.A06;
            if (ru instanceof XX) {
                ((XX) ru).A01(new C0235Xd(), ga);
            }
        }
        GA.A03((GA) this.mMobileConfigFactoryProvider.get());
    }

    @Inject
    public MobileConfigLogoutHandler(eJ<XX> eJVar, eJ<AbstractC0234Xa> eJVar2, AbstractC0246Xt<MobileConfigInit> xt) {
        this.mMobileConfigManagerHolderProvider = eJVar;
        this.mMobileConfigFactoryProvider = eJVar2;
        this.mMobileConfigInitLazy = xt;
    }
}
