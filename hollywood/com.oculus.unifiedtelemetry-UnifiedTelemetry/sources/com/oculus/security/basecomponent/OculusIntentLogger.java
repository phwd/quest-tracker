package com.oculus.security.basecomponent;

import X.AbstractC0096Hu;
import X.AbstractC0247Xu;
import X.C0380gZ;
import X.C0408hC;
import X.C0414hK;
import X.C0515sp;
import X.QC;
import X.Rc;
import X.XT;
import android.content.Context;
import android.content.Intent;
import com.facebook.ultralight.AutoGeneratedAccessMethod;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.facebook.ultralight.Inject;
import com.oculus.logging.utils.Event;
import com.oculus.logging.utils.EventManager;
import com.oculus.security.basecomponent.MC;
import javax.annotation.Nullable;
import org.json.JSONException;
import org.json.JSONObject;

@Dependencies({"_UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_BINDING_ID", "_UL__ULSEP_com_oculus_logging_utils_EventManager_ULSEP_BINDING_ID", "_UL__ULSEP_android_content_Context_ULSEP_com_facebook_inject_ForAppContext_ULSEP_BINDING_ID"})
public class OculusIntentLogger extends XT {
    public static final String EVENT_NAME = "oculus_security_horizon_intent_logging";
    public static final String KEY_CALLER_IDENTITY = "caller_identity";
    public static final String KEY_ENDPOINT_NAME = "endpoint_name";
    public static final String KEY_INTENT = "intent";
    public static final String KEY_STATUS = "status";
    public static final String KEY_SUB_ENDPOINT_NAME = "sub_endpoint_name";
    public QC _UL_mInjectionContext;

    @AutoGeneratedAccessMethod
    public static final OculusIntentLogger A00(AbstractC0247Xu xu) {
        return (OculusIntentLogger) C0515sp.A00(25, xu);
    }

    @AutoGeneratedFactoryMethod
    public static final OculusIntentLogger A01(AbstractC0247Xu xu) {
        return new OculusIntentLogger(xu);
    }

    @Override // X.XT
    public final void A02(String str, @Nullable String str2, @Nullable String str3, @Nullable Intent intent) {
        String obj;
        String str4;
        if (((Rc) AbstractC0096Hu.A03(0, 115, this._UL_mInjectionContext)).A2L(MC.oculus_security_intent_logging.horizon_enabled)) {
            Event A1h = ((EventManager) AbstractC0096Hu.A03(1, 106, this._UL_mInjectionContext)).A1h(EVENT_NAME);
            A1h.A18("endpoint_name", str);
            if (str2 != null) {
                A1h.A18(KEY_SUB_ENDPOINT_NAME, str2);
            }
            if (str3 != null) {
                A1h.A18(KEY_STATUS, str3);
            }
            if (intent != null) {
                C0408hC A00 = C0414hK.A00((Context) AbstractC0096Hu.A03(2, 3, this._UL_mInjectionContext), intent, null);
                if (A00 == null) {
                    obj = "null";
                } else {
                    obj = A00.toString();
                }
                A1h.A18("caller_identity", obj);
                try {
                    JSONObject jSONObject = C0380gZ.A00(intent).A01;
                    if (jSONObject == null) {
                        str4 = "";
                    } else {
                        str4 = jSONObject.toString();
                    }
                    A1h.A18(KEY_INTENT, str4);
                } catch (JSONException e) {
                    A1h.A18(KEY_INTENT, e.toString());
                    A1h.A3Q();
                    return;
                }
            }
            A1h.A3Q();
        }
    }

    @Inject
    public OculusIntentLogger(AbstractC0247Xu xu) {
        this._UL_mInjectionContext = new QC(3, xu);
    }
}
