package com.oculus.mobileconfig.init;

import com.facebook.inject.InjectorLike;
import com.facebook.inject.Lazy;
import com.facebook.inject.UltralightLazy;
import com.facebook.inject.UltralightProvider;
import com.facebook.mobileconfig.factory.MobileConfig;
import com.facebook.mobileconfig.factory.module.MobileConfigFactoryModule;
import com.facebook.mobileconfig.impl.MobileConfigFactoryImpl;
import com.facebook.mobileconfig.impl.MobileConfigManagerSingletonHolder;
import com.facebook.mobileconfig.impl.module.MobileConfigFactoryImplModule;
import com.facebook.ultralight.AutoGeneratedAccessMethod;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.facebook.ultralight.UL;
import com.oculus.auth.handler.LogoutHandler;
import com.oculus.mobileconfig.init.MobileConfigInitModule;
import javax.inject.Inject;
import javax.inject.Provider;

@Dependencies({"_UL__ULSEP_com_facebook_mobileconfig_impl_MobileConfigManagerSingletonHolder_ULSEP_BINDING_ID", "_UL__ULSEP_com_facebook_mobileconfig_factory_MobileConfig_ULSEP_BINDING_ID", "_UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigInit_ULSEP_BINDING_ID"})
public class MobileConfigLogoutHandler implements LogoutHandler {
    private static final int NUM_USERS_DATA_TO_SAVE = 5;
    private final Provider<MobileConfig> mMobileConfigFactoryProvider;
    private final Lazy<MobileConfigInit> mMobileConfigInitLazy;
    private final Provider<MobileConfigManagerSingletonHolder> mMobileConfigManagerHolderProvider;

    @AutoGeneratedAccessMethod
    public static final MobileConfigLogoutHandler _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return (MobileConfigLogoutHandler) UL.factorymap.get(MobileConfigInitModule.UL_id._UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_BINDING_ID, injectorLike);
    }

    @AutoGeneratedFactoryMethod
    public static final MobileConfigLogoutHandler _UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_FACTORY_METHOD(InjectorLike injectorLike) {
        return new MobileConfigLogoutHandler(MobileConfigFactoryImplModule._UL__ULSEP_javax_inject_Provider_ULLT_com_facebook_mobileconfig_impl_MobileConfigManagerSingletonHolder_ULGT__ULSEP_ACCESS_METHOD(injectorLike), MobileConfigFactoryModule._UL__ULSEP_javax_inject_Provider_ULLT_com_facebook_mobileconfig_factory_MobileConfig_ULGT__ULSEP_ACCESS_METHOD(injectorLike), MobileConfigInit._UL__ULSEP_com_facebook_inject_Lazy_ULLT_com_oculus_mobileconfig_init_MobileConfigInit_ULGT__ULSEP_ACCESS_METHOD(injectorLike));
    }

    @AutoGeneratedAccessMethod
    public static final Provider _UL__ULSEP_javax_inject_Provider_ULLT_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULGT__ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return UltralightProvider.get(MobileConfigInitModule.UL_id._UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_BINDING_ID, injectorLike);
    }

    @AutoGeneratedAccessMethod
    public static final Lazy _UL__ULSEP_com_facebook_inject_Lazy_ULLT_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULGT__ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return UltralightLazy.get(MobileConfigInitModule.UL_id._UL__ULSEP_com_oculus_mobileconfig_init_MobileConfigLogoutHandler_ULSEP_BINDING_ID, injectorLike);
    }

    @Inject
    public MobileConfigLogoutHandler(Provider<MobileConfigManagerSingletonHolder> provider, Provider<MobileConfig> provider2, Lazy<MobileConfigInit> lazy) {
        this.mMobileConfigManagerHolderProvider = provider;
        this.mMobileConfigFactoryProvider = provider2;
        this.mMobileConfigInitLazy = lazy;
    }

    @Override // com.oculus.auth.handler.LogoutHandler
    public void beforeLogout() {
        this.mMobileConfigManagerHolderProvider.get().deleteOldUserData(5);
        this.mMobileConfigInitLazy.get().logout();
        ((MobileConfigFactoryImpl) this.mMobileConfigFactoryProvider.get()).refreshSessionState();
    }
}
