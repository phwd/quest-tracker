package com.oculus.ocms.library.receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.ResultReceiver;
import com.facebook.debug.log.BLog;
import com.facebook.inject.InjectorLike;
import com.facebook.inject.Lazy;
import com.facebook.inject.UltralightLazy;
import com.facebook.inject.UltralightProvider;
import com.facebook.secure.switchoff.DefaultSwitchOffs;
import com.facebook.ultralight.AutoGeneratedAccessMethod;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.facebook.ultralight.UL;
import com.oculus.ocms.library.receiver.ReceiverModule;
import java.util.Locale;
import javax.inject.Provider;

@Dependencies({})
public class InstallExistingReceiver extends BroadcastReceiver {
    private static final String TAG = "InstallExistingReceiver";

    @AutoGeneratedAccessMethod
    public static final Lazy _UL__ULSEP_com_facebook_inject_Lazy_ULLT_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULGT__ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return UltralightLazy.get(ReceiverModule.UL_id._UL__ULSEP_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULSEP_BINDING_ID, injectorLike);
    }

    @AutoGeneratedAccessMethod
    public static final InstallExistingReceiver _UL__ULSEP_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return (InstallExistingReceiver) UL.factorymap.get(ReceiverModule.UL_id._UL__ULSEP_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULSEP_BINDING_ID, injectorLike);
    }

    @AutoGeneratedFactoryMethod
    public static final InstallExistingReceiver _UL__ULSEP_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULSEP_FACTORY_METHOD(InjectorLike injectorLike) {
        return new InstallExistingReceiver();
    }

    @AutoGeneratedAccessMethod
    public static final Provider _UL__ULSEP_javax_inject_Provider_ULLT_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULGT__ULSEP_ACCESS_METHOD(InjectorLike injectorLike) {
        return UltralightProvider.get(ReceiverModule.UL_id._UL__ULSEP_com_oculus_ocms_library_receiver_InstallExistingReceiver_ULSEP_BINDING_ID, injectorLike);
    }

    public void onReceive(Context context, Intent intent) {
        BLog.d(TAG, "Got intent for installExisting call");
        if (intent == null) {
            BLog.e(TAG, "No intent available, do nothing");
        } else if (!DefaultSwitchOffs.general().check(context, this, intent)) {
            BLog.d(TAG, "Intent switched off, doing nothing");
        } else {
            ResultReceiver resultReceiver = (ResultReceiver) intent.getParcelableExtra("android.intent.extra.RESULT_RECEIVER");
            if (resultReceiver == null) {
                BLog.e(TAG, "InstallExistingReceiver needs a result receiver to function");
                return;
            }
            Integer valueOf = Integer.valueOf(intent.getIntExtra("android.content.pm.extra.STATUS", 1));
            String stringExtra = intent.getStringExtra("android.content.pm.extra.STATUS_MESSAGE");
            BLog.d(TAG, String.format(Locale.US, "Sending Results Status: [%d] %s", valueOf, stringExtra));
            resultReceiver.send(valueOf.intValue(), intent.getExtras());
        }
    }
}
