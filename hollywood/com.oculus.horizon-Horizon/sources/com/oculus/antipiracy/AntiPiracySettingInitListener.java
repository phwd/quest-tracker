package com.oculus.antipiracy;

import X.AbstractC06640p5;
import X.AnonymousClass0DC;
import android.text.TextUtils;
import com.facebook.ultralight.AutoGeneratedFactoryMethod;
import com.facebook.ultralight.Dependencies;
import com.facebook.ultralight.Eager;
import com.facebook.ultralight.Inject;
import com.oculus.auth.credentials.Credentials;
import com.oculus.auth.handler.LoginHandler;
import com.oculus.common.init.INeedInit;
import com.oculus.device.DeviceType;
import com.oculus.util.device.DeviceUtils;

@Dependencies({"_UL__ULSEP_com_oculus_antipiracy_AntiPiracyManager_ULSEP_BINDING_ID", "_UL__ULSEP_com_oculus_antipiracy_AntiPiracyServiceScheduler_ULSEP_BINDING_ID", "_UL__ULSEP_com_oculus_util_device_DeviceUtils_ULSEP_BINDING_ID"})
public class AntiPiracySettingInitListener implements INeedInit, LoginHandler {
    public static final String TAG = "AntiPiracySettingInitListener";
    @Inject
    @Eager
    public final AntiPiracyManager mAntiPiracyManager;
    @Inject
    @Eager
    public final AntiPiracyServiceScheduler mAntiPiracyServiceScheduler;
    @Inject
    @Eager
    public final DeviceUtils mDeviceUtils;

    @AutoGeneratedFactoryMethod
    public static final AntiPiracySettingInitListener A00(AbstractC06640p5 r1) {
        return new AntiPiracySettingInitListener(r1);
    }

    private void A01() {
        Credentials credentials;
        if (this.mDeviceUtils.A04() && DeviceType.is6DOF() && (credentials = this.mAntiPiracyManager.mCredentialsProvider.get()) != null && !TextUtils.isEmpty(credentials.mAccessToken)) {
            this.mAntiPiracyServiceScheduler.A02();
        }
    }

    @Inject
    public AntiPiracySettingInitListener(AbstractC06640p5 r2) {
        this.mAntiPiracyManager = AntiPiracyManager.A00(r2);
        this.mAntiPiracyServiceScheduler = AntiPiracyServiceScheduler.A00(r2);
        this.mDeviceUtils = DeviceUtils.A00(r2);
    }

    @Override // com.oculus.auth.handler.LoginHandler
    public final AnonymousClass0DC<Void> afterLoginAsync() {
        A01();
        return AnonymousClass0DC.A04(null);
    }

    @Override // com.oculus.common.init.INeedInit
    public final void init() {
        A01();
    }
}
